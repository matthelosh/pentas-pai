import{K as V,r as o,c as i,a as f,u,w as S,F as b,o as r,Z as U,b as e,d as F,f as n,k as g,l as k,v as _,m as x,h as L,i as B,e as y,t as w,j as D}from"./app-6686f679.js";import{_ as M}from"./Front-8c89b8b2.js";import{_ as $}from"./AlertBox-a00a78b4.js";import{A as C}from"./mdi-d71a3133.js";import"./_plugin-vue_export-helper-c27b6911.js";const R={class:"w-full rounded bg-white shadow p-3"},A=e("h1",{class:"text-lg font-bold"},"Formulir Pendaftaran ",-1),I={class:"columns-1 md:columns-2 md:p-10 gap-5 relative"},E={class:"w-full bg-gray-100 p-3 mb-3 rounded"},K=["src"],O=e("h1",{class:"text-center text-gray-500 text-lg"},[y("Foto Peserta "),e("br"),e("small",{class:"text-black"},"[Klik gambar untuk mengganti]")],-1),J=["onSubmit"],T=e("h3",{class:"text-lg text-gray-700 mt-0 mb-4 font-extrabold"},"Data Peserta",-1),W={class:"flex justify-between mb-3"},H=e("label",{for:"sekolah"},"Sekolah",-1),Z=["value","selected"],q={class:"flex justify-between mb-3"},z=e("label",{for:"nisn",class:"w-1/4"},"NISN",-1),G={class:"flex justify-between mb-3"},Q=e("label",{for:"nama",class:"w-1/4"},"Nama",-1),X={class:"flex justify-between mb-3"},Y=e("label",{for:"jk",class:"w-1/4"},"JK",-1),ee={class:"grid grid-cols-2 w-3/4"},le=e("label",{for:"lk",class:"ml-2"},"Laki-laki",-1),ae=e("label",{for:"pr",class:"ml-2"},"Perempuan",-1),te={class:"flex justify-between mb-3"},se=e("label",{for:"lomba"},"Lomba",-1),oe=["value","selected"],ne={class:"flex justify-between mb-3"},re=e("label",{for:"hp",class:"w-1/4"},"No. WA",-1),de={class:"flex justify-center mb-3"},ie=["disabled"],_e={__name:"Daftar",setup(ue){const v=V(),c=o(null),h=o("img/peserta.png"),d=o(!1),j=s=>{let a=s.target.files[0];h.value=URL.createObjectURL(a),c.value=a},t=o({lomba_id:[]});o([]);const N=o(),P=async()=>{d.value=!0;let s=new FormData;s.append("data",JSON.stringify(t.value)),c.value!=null&&s.append("foto",c.value),await D.post("/registrasi",s).then(a=>{d.value=!1,m.value.open("Ok",a.data.msg),t.value={lomba_id:[]}}).catch(a=>{let l="Error";return a.response.data.errCode==23e3?l=`${t.value.nama}, NISN: ${t.value.nisn} sudah terdaftar`:l="Maaf ada kesalahan di pihak kami.",d.value=!1,m.value.open("Error",l),!1})},m=o(null);return(s,a)=>(r(),i(b,null,[f($,{ref_key:"alertBox",ref:m},null,512),f(u(U),{title:"Mendaftar Lomba"}),f(M,null,{default:S(()=>[e("div",R,[A,e("div",I,[e("div",E,[e("img",{src:h.value,alt:"Peserta",class:"w-1/2 rounded-full mx-auto shadow transition-all duration-500 hover:shadow-lg hover:shadow-lime-600 cursor-pointer bg-[#fefefe]",onClick:a[0]||(a[0]=l=>s.$refs.foto.click())},null,8,K),O,e("input",{type:"file",ref:"foto",class:"hidden",onChange:j},null,544)]),e("form",{ref_key:"formRegistrasi",ref:N,onSubmit:F(P,["prevent"]),class:"p-2 md:h-96"},[T,e("div",W,[H,n(e("select",{name:"sekolah",class:"rounded-lg w-3/4 p-1 placeholder:text-blue-500 focus:border-blue-500 bg-gray-100",placeholder:"Pilih","onUpdate:modelValue":a[1]||(a[1]=l=>t.value.sekolah_id=l)},[(r(!0),i(b,null,k(u(v).props.sekolahs,(l,p)=>(r(),i("option",{key:p,value:l.npsn,selected:l.npsn==t.value.sekolah_id},w(l.nama),9,Z))),128))],512),[[g,t.value.sekolah_id]])]),e("div",q,[z,n(e("input",{type:"text",name:"nisn",class:"rounded-lg w-3/4 p-1 placeholder:text-blue-500 focus:border-blue-500 bg-gray-100",placeholder:"Nomor Induk Siswa Nasional","onUpdate:modelValue":a[2]||(a[2]=l=>t.value.nisn=l)},null,512),[[_,t.value.nisn]])]),e("div",G,[Q,n(e("input",{type:"text",name:"nama",class:"rounded-lg w-3/4 p-1 placeholder:text-blue-500 focus:border-blue-500 bg-gray-100",placeholder:"Nama Lengkap","onUpdate:modelValue":a[3]||(a[3]=l=>t.value.nama=l)},null,512),[[_,t.value.nama]])]),e("div",X,[Y,e("div",ee,[e("span",null,[n(e("input",{type:"radio",name:"jk",value:"Laki-laki",id:"lk","onUpdate:modelValue":a[4]||(a[4]=l=>t.value.jk=l)},null,512),[[x,t.value.jk]]),le]),e("span",null,[n(e("input",{type:"radio",name:"jk",value:"Perempuan",id:"pr","onUpdate:modelValue":a[5]||(a[5]=l=>t.value.jk=l)},null,512),[[x,t.value.jk]]),ae])])]),e("div",te,[se,n(e("select",{name:"lomba",class:"rounded-lg w-3/4 p-1 placeholder:text-blue-500 focus:border-blue-500 bg-gray-100",placeholder:"Pilih","onUpdate:modelValue":a[6]||(a[6]=l=>t.value.lomba_id=l),multiple:""},[(r(!0),i(b,null,k(u(v).props.bidangs,(l,p)=>(r(),i("option",{key:p,value:l.kode,selected:l.kode==t.value.lomba_id},w(l.label),9,oe))),128))],512),[[g,t.value.lomba_id]])]),e("div",ne,[re,n(e("input",{type:"text",name:"hp",class:"rounded-lg w-3/4 p-1 placeholder:text-blue-500 focus:border-blue-500 bg-gray-100",placeholder:"Nomor WA/HP","onUpdate:modelValue":a[7]||(a[7]=l=>t.value.hp=l)},null,512),[[_,t.value.hp]])]),e("div",de,[e("button",{type:"submit",class:"bg-blue-600 text-white rounded px-3 py-1 hover:bg-blue-800 flex items-center disabled:bg-blue-300 disabled:text-gray-300",disabled:d.value},[d.value?(r(),L(u(C),{key:0,class:"animate-spin w-5 mr-1"})):B("",!0),y(" Daftar ")],8,ie)])],40,J)])])]),_:1})],64))}};export{_e as default};
