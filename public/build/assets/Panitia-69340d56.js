import{_ as w}from"./Dash-485831fb.js";import{r as _,K as P,c as r,a as p,u as h,w as j,F as m,o as d,Z as B,b as a,e as b,l as u,j as k,P as y,t as n}from"./app-6686f679.js";import{_ as C}from"./AlertBox-a00a78b4.js";import{S as L,e as N}from"./mdi-d71a3133.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"w-full bg-white rouded shadow"},A={class:"toolbar bg-white sticky top-14 flex items-center justify-between p-3 h-12 shadow print:hidden"},K={class:"toolbar-title text-lg font-bold flex items-center gap-1"},M={class:"table table-responsive w-full"},D={class:"border border-collapse w-full"},O=a("thead",null,[a("tr",{class:"bg-gray-100"},[a("th",{class:"py-2 px-3"},"No"),a("th",{class:"py-2 px-3"},"NIP"),a("th",{class:"py-2 px-3"},"Nama"),a("th",{class:"py-2 px-3"},"JK"),a("th",{class:"py-2 px-3"},"Sekolah"),a("th",{class:"py-2 px-3"},"Jabatan")])],-1),Q={class:"text-center py-1 px-3"},$={class:"py-1 px-3"},z={class:"py-1 px-3"},E={class:"text-teal-800"},T={class:"py-1 px-3"},V={class:"py-1 px-3"},q={class:"py-1 px-3"},F=["onChange"],H=a("option",{value:"0"},"Pilih Jabatan",-1),I=["value","selected"],Y={__name:"Panitia",setup(U){const x=_(["Penasehat","Penanggung Jawab","Ketua","Wakil Ketua","Sekretaris 1","Sekretaris 2","Bendahara 1","Bendahara 2","Sie Lomba MTQ","Sie Lomba MHQ","Sie Lomba Pildacil","Sie Lomba Banjari","Sie Lomba Adzan","Sie Lomba Cerdas-Cermat","Sie Dokumentasi","Sie Perlengkapan","Sie Konsumsi","Sie Pembantu Umum"]),f=_(!1),c=_(null),g=P(),v=async(o,l)=>{f.value=!0;let t=o.target.value,e=null;if(t.includes("Sie Lomba")){let s=t.split(" ");switch(s[-s.length]){case"MTQ":e="mtq";break;case"MHQ":e="mhq";break;case"Pildacil":e="pdc";break;case"Banjari":e="bjr";break;case"Adzan":e="adz";break;case"Cerdas-Cermat":e="lcc";break}}let i={guru_id:l.id,lomba_id:e,jabatan:t,id:l.panitias.length>0?l.panitias[0].id:null,user_id:l.panitias.length>0?l.panitias[0].user_id:null};await k.post(route("panitia.store"),{data:JSON.stringify(i)}).then(s=>{s.data.status=="ok"&&(c.value.open("Ok",s.data.msg),y.reload({only:["gurus"]}))}).catch(s=>{c.value.open("Error",s.response.data.msg)})},S=async()=>{k.post(route("panitia.account.make")).then(o=>{c.value.open("Ok",o.data.msg),y.reload({only:["gurus"]})}).catch(o=>{c.value.open("Error",o.response.data.msg)})};return(o,l)=>(d(),r(m,null,[p(C,{ref_key:"alertBox",ref:c},null,512),p(h(B),{title:"Data Panitia"}),p(w,null,{default:j(()=>[a("div",J,[a("div",A,[a("div",K,[p(h(L),{type:"mdi",path:h(N)},null,8,["path"]),b(" Data Panitia ")]),a("div",{class:"toolbar-items flex items-center gap-1"},[a("button",{class:"bg-sky-600 hover:bg-sky-800 active:bg-sky-200 active:text-gray-800 py-2 px-3 text-white rounded-md",onClick:S}," Buat Akun ")])]),a("div",M,[a("table",D,[O,a("tbody",null,[(d(!0),r(m,null,u(h(g).props.gurus,(t,e)=>(d(),r("tr",{class:"odd:bg-gray-50",key:t},[a("td",Q,n(e+1),1),a("td",$,n(t.nip),1),a("td",z,[b(n(t.nama)+" ",1),a("span",E,n(t.panitias.length>0?`[${t.panitias[0].user.name}]`:""),1)]),a("td",T,n(t.jk),1),a("td",V,n(t.sekolah?t.sekolah.nama:"-"),1),a("td",q,[b(n(t.panitia?t.panitias.jabatan:"-")+" ",1),a("select",{name:"jabatan",id:"jabatanSelect",onChange:i=>v(i,t)},[H,(d(!0),r(m,null,u(x.value,(i,s)=>(d(),r("option",{key:s,value:i,selected:t.panitias.length>0&&i==t.panitias[0].jabatan},n(i),9,I))),128))],40,F)])]))),128))])])])])]),_:1})],64))}};export{Y as default};
